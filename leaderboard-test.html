<!DOCTYPE html>
<html>
<head>
    <title>Leaderboard</title>
</head>
<body>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Score</th>
            </tr>
        </thead>
        <tbody id="result"></tbody>
    </table>

    <script>
        const resultContainer = document.getElementById("result");

        const url = "https://cosmic-backend.nighthawkcodingsociety.com/api/leaderboard/";
        const headers = {
            method: 'GET',
            mode: 'cors',
            cache: 'default',
            credentials: 'omit',
            headers: {
                'Content-Type': 'application/json'
            },
        };

        // Fetch data from the leaderboard API
        fetch(url, headers)
            .then(response => {
                if (response.status !== 200) {
                    const errorMsg = 'API response error: ' + response.status;
                    console.log(errorMsg);
                    const tr = document.createElement("tr");
                    const td = document.createElement("td");
                    td.innerHTML = errorMsg;
                    tr.appendChild(td);
                    resultContainer.appendChild(tr);
                    return;
                }
                response.json().then(data => {
                    for (const row of data) {
                        const tr = document.createElement("tr");
                        const id = document.createElement("td");
                        const score = document.createElement("td");

                        id.innerHTML = row.id;
                        score.innerHTML = row.score;

                        tr.appendChild(id);
                        tr.appendChild(score);

                        resultContainer.appendChild(tr);
                    }
                });
            })
            .catch(err => {
                console.error(err);
                const tr = document.createElement("tr");
                const td = document.createElement("td");
                td.innerHTML = err;
                tr.appendChild(td);
                resultContainer.appendChild(tr);
            });
    </script>
</body>
</html>
